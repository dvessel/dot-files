#!/usr/bin/env zsh

# Helper used to check for installed brew formulae.
#
# Usage:
#  _brew_check [formulae] ...
#
#  if _brew_check fzf fd; then
#    cmd ...
#    cmd ...
#  fi
#
# Add as many formulae as needed. Status code 1 (error) and stderr 
# message on failed checks.
typeset -a formulae

for f in $@; if [[ ! -d `brew --prefix $f` ]]; then
  formulae+=$f
fi
if [[ -n $formulae ]]; then
  printf "Required brew formula '%s' not installed.\n" "$formulae" >&2
  return 1
fi
